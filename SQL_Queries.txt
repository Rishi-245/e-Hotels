-- Drop Hotel_Chain table if it exists
DROP TABLE IF EXISTS Hotel_Chain CASCADE;

-- Create Hotel_Chain table
CREATE TABLE Hotel_Chain (
    chain_id SERIAL PRIMARY KEY, 
    name VARCHAR(255) NOT NULL, 
    address VARCHAR(255),
    phone VARCHAR(15)
);

-- Drop Hotel table if it exists
DROP TABLE IF EXISTS Hotel CASCADE;

-- Create Hotel table
CREATE TABLE Hotel (
    hotel_id SERIAL PRIMARY KEY, 
    chain_id INT REFERENCES Hotel_Chain(chain_id), 
    category VARCHAR(50), 
    num_rooms INT, 
    hotel_address VARCHAR(255), 
    hotel_email VARCHAR(255),
    FOREIGN KEY (chain_id) REFERENCES Hotel_Chain(chain_id) ON DELETE CASCADE
);

-- Drop Room table if it exists
DROP TABLE IF EXISTS Room CASCADE;

-- Create Room table
CREATE TABLE Room (
    room_id SERIAL PRIMARY KEY, 
    hotel_id INT REFERENCES Hotel(hotel_id) ON DELETE CASCADE, 
    room_number INT, 
    price DECIMAL(10, 2), 
    capacity INT, 
    view_type VARCHAR(50),
    UNIQUE (hotel_id, room_number)  -- Ensures unique room number within each hotel
);

-- Drop Customer table if it exists
DROP TABLE IF EXISTS Customer CASCADE;

-- Create Customer table
CREATE TABLE Customer (
    customer_id SERIAL PRIMARY KEY, 
    f_name VARCHAR(100), 
    m_name VARCHAR(100), 
    l_name VARCHAR(100), 
    address VARCHAR(255), 
    type_id VARCHAR(50), 
    reg_date DATE
);

-- Insert data into Hotel_Chain table
INSERT INTO Hotel_Chain (name, address, phone)
VALUES 
    ('Luxury Stays', '123 Luxe Ave, Cityville', '555-1001'),
    ('Budget Inn', '456 Affordable St, Townsville', '555-1002'),
    ('Comfort Suites', '789 Cozy Blvd, Villagetown', '555-1003');

-- Insert data into Hotel table
INSERT INTO Hotel (chain_id, category, num_rooms, hotel_address, hotel_email)
VALUES
    (1, '5-Star', 100, '123 Luxe Ave, Cityville', 'luxurystays@luxehotel.com'),
    (2, 'Budget', 50, '456 Affordable St, Townsville', 'budgetinn@budgethotel.com'),
    (3, '3-Star', 75, '789 Cozy Blvd, Villagetown', 'comfortsuites@comforthotel.com');

-- Insert data into Room table
INSERT INTO Room (hotel_id, room_number, price, capacity, view_type)
VALUES
    (1, 101, 150.00, 2, 'Ocean View'),
    (1, 102, 175.00, 2, 'City View'),
    (2, 201, 80.00, 1, 'Mountain View'),
    (2, 202, 90.00, 1, 'Garden View'),
    (3, 301, 120.00, 2, 'Lake View'),
    (3, 302, 110.00, 2, 'Forest View');

-- Insert data into Customer table
INSERT INTO Customer (f_name, m_name, l_name, address, type_id, reg_date)
VALUES
    ('John', 'A', 'Doe', '123 Main St, Cityville', 'Regular', '2023-01-01'),
    ('Jane', 'B', 'Smith', '456 Oak Rd, Townsburg', 'VIP', '2023-02-15'),
    ('Alice', 'C', 'Johnson', '789 Pine Ave, Villageburg', 'Regular', '2023-03-10');

-- Select data from Hotel_Chain table
SELECT * FROM Hotel_Chain;

-- Select data from Hotel table
SELECT * FROM Hotel;

-- Select data from Room table
SELECT * FROM Room;

-- Select data from Customer table
SELECT * FROM Customer;
